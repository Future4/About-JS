<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <script>
    var socket = new WebSocket('ws://www.')

    // 实例化socket对象后，浏览器马上尝试创建连接，Websocket有表示当前状态的值

    Websocket.OPENING //0 正在建立连接
    Websocket.OPEN //1 已经建立连接
    Websocket.CLOSING //2 正在关闭连接
    Websocket.CLOSE //3 已关闭连接

    // 你可以在任何时候使用 socket.close()来关闭连接
    socket.close()
    // 调用此方法后，状态直接变成2

    var socket = new WebSocket('ws://www.')
    socket.send('Hello world')
    // socket只能发送纯文本，所以对于对象，你以你更改将它序列化 josn.stringify(obj)


    // 当服务器给客户端传递消息时，websocket会触发message事件，返回的数据保存在event.data中

    socket.onmessage = function (event) {
      var data = event.data
    }
    socket.onopen = function () {
      console.log('成功建立连接时触发')
    }
    socket.onerror = function () {
      console.log('发生错误时触发')
    }
    socket.onclose = function (event) {
      console.log('连接关闭时触发')
    }


  </script>
</body>

</html>
